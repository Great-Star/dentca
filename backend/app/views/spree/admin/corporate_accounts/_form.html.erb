<% s_or_b = "ca" %>

<div data-hook="admin_corporate_account_form_fields" class="row">
    <div class="col-xs-12 col-md-6">
        <div class="panel panel-default">
            <div class="panel-heading">
                <h1 class="panel-title">
                <%= Spree.t(:general_settings) %>
                </h1>
            </div>
            <div class="panel-body">
                <div class="col-xs-12 col-md-12">
                    <%= f.field_container :company_id, class: ['form-group'] do %>
                        <%= f.label :company_id, Spree.t(:company_id) %><span class="required">(id)*</span>
                        <%= f.text_field :company_id, class: 'form-control' %>
                        <%= f.error_message_on :company_id %>
                    <% end %>
                </div>

                <div class="col-xs-12 col-md-12">
                    <%= f.field_container :company_name, class: ['form-group'] do %>
                        <%= f.label :company_name, Spree.t(:company_name) %><span class="required">*</span>
                        <%= f.text_field :company_name, class: 'form-control' %>
                        <%= f.error_message_on :company_name %>
                    <% end %>
                </div>

                <div class="col-xs-12 col-md-12">
                    <%= f.field_container :email, class: ['form-group'] do %>
                        <%= f.label :email, Spree.t(:email) %><span class="required">*</span>
                        <%= f.email_field :email, class: 'form-control' %>
                        <%= f.error_message_on :email %>
                    <% end %>
                </div>

                <div data-hook="admin_corporate_account_form_password_fields" class="col-xs-12 col-md-12">
                    <%= f.field_container :password, class: ['form-group'] do %>
                        <%= f.label :password, Spree.t(:password) %>
                        <%= f.password_field :password, class: 'form-control' %>
                        <%= f.error_message_on :password %>
                    <% end %>

                    <%= f.field_container :password_confirmation, class: ['form-group'] do %>
                        <%= f.label :password_confirmation, Spree.t(:confirm_password) %>
                        <%= f.password_field :password_confirmation, class: 'form-control' %>
                        <%= f.error_message_on :password_confirmation %>
                    <% end %>
                </div>
            
                <div data-hook="admin_corporate_account_form_checkout_password_fields" class="col-xs-12 col-md-12">
                    <%= f.field_container :checkout_password, class: ['form-group'] do %>
                        <%= f.label :checkout_password, Spree.t(:checkout_password) %>
                        <%= f.password_field :checkout_password, class: 'form-control' %>
                        <%= f.error_message_on :checkout_password %>
                    <% end %>

                    <%= f.field_container :checkout_password_confirmation, class: ['form-group'] do %>
                        <%= f.label :checkout_password_confirmation, Spree.t(:confirm_checkout_password) %>
                        <%= f.password_field :checkout_password_confirmation, class: 'form-control' %>
                        <%= f.error_message_on :checkout_password_confirmation %>
                    <% end %>
                </div> 

                <div data-hook="new_corporate_account_shipping_category" class="col-xs-12 col-md-12">
                    <%= f.field_container :shipping_category, class: ['form-group'] do %>
                    <%= f.label :shipping_category_id, Spree.t(:shipping_categories) %><span class="required">*</span>
                    <%= f.collection_select(:shipping_category_id, Spree::ShippingCategory.all, :id, :name, { include_blank: Spree.t('match_choices.none') }, { class: 'select2', required: :required }) %>
                    <%= f.error_message_on :shipping_category_id %>
                    <% end %>
                </div>

                <div data-hook="accounts_product_price_set" class="col-xs-12 col-md-12">
                    <%= f.field_container :product_price_set, class: ['form-group'] do %>
                    <%= f.label :product_price_set_id, Spree.t(:product_price_set) %><span class="required">*</span>
                    <%= f.collection_select(:product_price_set_id, Spree::ProductPriceSet.all, :id, :name, { include_blank: Spree.t('match_choices.none') }, { class: 'select2', required: :required }) %>
                    <%= f.error_message_on :product_price_set_id %>
                    <% end %>
                </div>
            </div>
        </div>

    </div>
    <div class="col-xs-12 col-md-6">
        <div class="panel panel-default">
            <div class="panel-heading">
                <h1 class="panel-title">
                <%= Spree.t(:company_address) %>
                </h1>
            </div>
            <div class="panel-body">
                <%= f.field_container :company, class: ["form-group"] do %>
                    <%= f.label :company, Spree.t(:company) %>
                    <%= f.text_field :company, class: 'form-control' %>
                    <%= f.error_message_on  :company %>
                <% end %>

                <%= f.field_container :address1, class: ["form-group"] do %>
                    <%= f.label :address1, Spree.t(:street_address) %><span class="required">*</span>
                    <%= f.text_field :address1, class: 'form-control' %>
                    <%= f.error_message_on :address1 %>
                <% end %>

                <%= f.field_container :address2, class: ["form-group"] do %>
                    <%= f.label :address2, Spree.t(:street_address_2) %>
                    <%= f.text_field :address2, class: 'form-control' %>
                    <%= f.error_message_on :address2 %>
                <% end %>

                <%= f.field_container :city, class: ["form-group"] do %>
                    <%= f.label :city, Spree.t(:city) %><span class="required">*</span>
                    <%= f.text_field :city, class: 'form-control' %>
                    <%= f.error_message_on :city %>
                <% end %>

                <%= f.field_container :zip_code, class: ["form-group"] do %>
                    <%= f.label :zip_code, Spree.t(:zip) %><span class="required">*</span>
                    <%= f.text_field :zip_code, class: 'form-control' %>
                    <%= f.error_message_on :zip_code %>
                <% end %>

                <div class="form-group">
                    <% @corporate_account.country ||= Spree::Country.first %>
                    <%= f.label :country_id, Spree.t(:country) %><span class="required">*</span>
                    <span id="<%= s_or_b %>country">                     
                        <%= f.collection_select :country_id, available_countries, :id, :name, {}, {class: 'select2'} %>
                    </span>
                </div>

                <%= f.field_container :state, class: ["form-group"] do %>
                    <%= f.label :state_id, Spree.t(:state) %><span class="required">*</span>
                    <span id="<%= s_or_b %>state">                     
                        <%= f.text_field :state_name, style: "display: #{@corporate_account.country.states.empty? ? 'block' : 'none'};",
                            disabled: !@corporate_account.country.states.empty?, class: 'form-control state_name' %>
                        <%= f.collection_select :state_id, @corporate_account.country.states.sort, :id, :name, { include_blank: true }, { class: 'select2', style: "display: #{@corporate_account.country.states.empty? ? 'none' : 'block' };", disabled: @corporate_account.country.states.empty? } %>
                    </span>
                <% end %>

                <%= f.field_container :contact_phone, class: ["form-group"] do %>
                    <%= f.label :contact_phone, Spree.t(:contact_phone) %><span class="required">*</span>
                    <%= f.text_field :contact_phone, class: 'form-control' %>
                    <%= f.error_message_on :contact_phone %>
                <% end %>

                <div class="form-group">
                    <%= f.label :billing_type_id, Spree.t(:billing_type) %><span class="required">*</span>
                    <%= f.collection_select :billing_type_id, Spree::BillingType.all, :id, :name, {}, {class: 'select2'} %>
                </div>

            </div>
        </div>
    </div>
</div>

<% content_for :head do %>
  <%= javascript_tag do %>
    $(document).ready(function(){
      $('span#<%= s_or_b %>country .select2').on('change', function() { update_state('<%= s_or_b %>'); });
    });
  <% end %>
<% end %>